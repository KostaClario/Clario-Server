<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 계좌 및 카드</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/myBankAndCardList.css}"/>
    <link rel="stylesheet" th:href="@{/css/bar.css}"/>
    <link rel="stylesheet" th:href="@{/account-css/modal.css}" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
<div class="wrapper">
    <div th:replace="~{headerside :: allModals}"></div>
    <div th:replace="~{headerside :: sidebar}"></div>
    <div class="main">
        <div th:replace="~{headerside :: header}"></div>
        <main class="content">
            <section class="section">
                <div class="section-inner">
                    <h3>내 계좌</h3>
                    <table class="data-table">
                        <thead>
                        <tr>
                            <th>계좌명</th>
                            <th>은행</th>
                            <th>계좌번호</th>
                            <th>금액</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="bank : ${banks}" th:if="${not #lists.isEmpty(banks)}">
                            <td th:text="${bank.bankAccountName}">계좌명</td>
                            <td th:text="${bank.bankName}">은행</td>
                            <td th:text="${bank.bankAccountNum}">계좌번호</td>
                            <td th:text="${T(java.lang.String).format('%,d', bank.balance.longValue())}">금액</td>
                        </tr>
                        <tr th:unless="${not #lists.isEmpty(banks)}">
                            <td>신한 주거래통장</td>
                            <td>신한은행</td>
                            <td>110-445-892364</td>
                            <td>3,200,000</td>
                        </tr>
                        <tr th:unless="${not #lists.isEmpty(banks)}">
                            <td>국민 급여우대통장</td>
                            <td>국민은행</td>
                            <td>822-25-4981327</td>
                            <td>2,750,000</td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="pagination">
                        <a th:each="pageNum : ${pageNumbers}"
                           th:href="@{/myDataConnection/{memberId}(memberId=${memberId}) + '?page=' + ${pageNum}}"
                           th:text="${pageNum}" th:classappend="${pageNum == currentPage} ? 'active' : ''">1</a>
                    </div>
                </div>
            </section>

            <section class="section">
                <div class="section-inner">
                    <h3>내 카드</h3>
                    <table class="data-table">
                        <thead>
                        <tr>
                            <th>카드이름</th>
                            <th>카드사</th>
                            <th>납부계좌</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="card : ${cards}" th:if="${not #lists.isEmpty(cards)}">
                            <td th:text="${card.cardName}">카드이름</td>
                            <td th:text="${card.cardCompany}">카드사</td>
                            <td th:text="${#strings.concat(card.cardBank, ' ', card.cardBankAccount)}">납부계좌</td>
                        </tr>
                        <tr th:unless="${not #lists.isEmpty(cards)}">
                            <td>신한 Deep Dream 카드</td>
                            <td>신한카드</td>
                            <td>신한은행 110-445-892364</td>
                        </tr>
                        <tr th:unless="${not #lists.isEmpty(cards)}">
                            <td>KB국민 체크카드 라이프</td>
                            <td>국민카드</td>
                            <td>국민은행 822-25-4981327</td>
                        </tr>
                        </tbody>
                    </table>
                    <div class="pagination">
                        <a th:each="pageNum : ${cardPageNumbers}"
                           th:href="@{/myDataConnection/{memberId}(memberId=${memberId}) + '?cardPage=' + ${pageNum}}"
                           th:text="${pageNum}"
                           th:classappend="${pageNum == currentCardPage} ? 'active' : ''">1</a>
                    </div>
                </div>
            </section>
        </main>
    </div>
</div>

<script th:inline="javascript">
    const today = new Date();
    const days = ['일', '월', '화', '수', '목', '금', '토'];

    const year = today.getFullYear();
    const month = String(today.getMonth() + 1).padStart(2, '0');
    const date = String(today.getDate()).padStart(2, '0');
    const weekday = days[today.getDay()];

    const formatted = `${year}. ${month}. ${date}. (${weekday})`;

    const el = document.getElementById('currentDate');
    if (el) {
        el.textContent = formatted;
    }
</script>

<script th:src="@{/js/modal.js}"></script>
</body>
</html>
