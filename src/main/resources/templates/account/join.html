<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입 - CLARIO</title>

    <!-- 아이콘 & 구글 폰트 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet"/>

    <!-- 공통 CSS -->
    <link rel="stylesheet" th:href="@{/account-css/style.css}" />
</head>
<body>
<main class="consent-container">
    <!-- 왼쪽 브랜드 영역 -->
    <div class="left">
        <img th:src="@{/img/ClarioLogo.png}" alt="CLARIO Logo">
    </div>

    <!-- 오른쪽 폼 영역 -->
    <div class="right2">
        <section class="content">
            <h2 style="text-align:center; margin-bottom:24px;">개인정보 입력</h2>
            <form class="form-edit" th:action="@{/join}" method="post">
                <div th:if="${errorMessage}" style="color:red;">
                    <p th:text="${errorMessage}"></p>
                </div>

                <!-- 이름 -->
                <div class="form-field">
                    <input type="text" name="name" placeholder="이름" required/>
                </div>

                <!-- 전화번호 -->
                <div class="form-field">
                    <input type="text" name="phonenum" placeholder="휴대폰번호 ( - 없이 입력)" required />
                </div>

                <!-- 비밀번호 -->
                <div class="form-field" style="margin-bottom:4px;">
                    <input type="password" name="password"
                           placeholder="비밀번호 (영문자, 숫자, 특수문자 8~16자)"
                           minlength="8" maxlength="16" required />
                </div>

                <!-- 비밀번호 확인 -->
                <div class="form-field" style="margin:12px 0 4px;">
                    <input type="password" name="confirmPassword"
                           placeholder="비밀번호 확인" required />
                </div>

                <div th:if="${error}" th:text="${error}" style="color: red"></div>

                <!-- 버튼 그룹 -->
                <div class="btn-group" style="margin-top:32px;">
                    <button type="button" class="btn btn-cancel" th:onclick="|location.href='@{/loginView}'|">다음에</button>
                    <button type="submit" class="btn btn-quit">확인</button>
                </div>
            </form>
        </section>
    </div>
</main>
<script>
    const phoneInput = document.querySelector('input[name="phonenum"]');

    phoneInput.addEventListener('input', function (e) {
        let numbers = e.target.value.replace(/\D/g, ''); // 숫자만 남김
        let formatted = '';

        if (numbers.length < 4) {
            formatted = numbers;
        } else if (numbers.length < 8) {
            formatted = numbers.slice(0, 3) + '-' + numbers.slice(3);
        } else {
            formatted = numbers.slice(0, 3) + '-' + numbers.slice(3, 7) + '-' + numbers.slice(7, 11);
        }

        e.target.value = formatted;
    });
</script>

</body>
</html>
